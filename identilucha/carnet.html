<script>
  const data = JSON.parse(sessionStorage.getItem("carnetData"));

  if (!data) {
    document.body.innerHTML = "<p>Error: No hay datos del carnet.</p>";
  } else {
    document.getElementById('nombre').textContent = 'Nombre: ' + data.nombre;
    document.getElementById('documento').textContent = 'Documento: ' + data.tipoDocumento + ' ' + data.numeroDocumento;
    document.getElementById('emergencia').textContent = 'Contacto de emergencia: ' + data.emergencia;
    document.getElementById('sangre').textContent = 'Tipo de sangre: ' + data.sangre;
    document.getElementById('rol').textContent = 'Rol: ' + data.rol;
    document.getElementById('foto').src = data.foto;

    if (data.rol === 'Administrativo') {
      document.getElementById('cargo').style.display = 'block';
      document.getElementById('cargo').textContent = 'Cargo: ' + data.cargo;
    }

    // QR con la URL actual (simboliza verificaciÃ³n)
    const canvas = document.getElementById("qrCanvas");
    const script = document.createElement("script");
    script.src = "https://cdn.jsdelivr.net/npm/qrious";
    script.onload = () => {
      new QRious({
        element: canvas,
        value: window.location.href,
        size: 100
      });
    };
    document.body.appendChild(script);
  }
</script>
